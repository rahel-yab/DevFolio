(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{722:(e,t,a)=>{"use strict";a.d(t,{K:()=>n});let s=a(9509).env.NEXT_PUBLIC_API_URL||"http://localhost:8080/api/v1";class r{getAuthHeaders(){let e=localStorage.getItem("access_token");return{"Content-Type":"application/json",...e&&{Authorization:"Bearer ".concat(e)}}}async handleResponse(e){if(!e.ok)throw Error((await e.json().catch(()=>({error:"Network error"}))).error||"HTTP ".concat(e.status));let t=await e.json();return t.data||t}async login(e){let t=await fetch("".concat(s,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"}),a=await this.handleResponse(t);return a.access_token&&localStorage.setItem("access_token",a.access_token),a}async register(e){let t=await fetch("".concat(s,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"}),a=await this.handleResponse(t);return a.access_token&&localStorage.setItem("access_token",a.access_token),a}async logout(){try{await fetch("".concat(s,"/auth/logout"),{method:"POST",headers:this.getAuthHeaders(),credentials:"include"})}finally{localStorage.removeItem("access_token")}}async getProfile(){let e=await fetch("".concat(s,"/auth/profile"),{headers:this.getAuthHeaders(),credentials:"include"});return this.handleResponse(e)}async updateProfile(e){let t=await fetch("".concat(s,"/auth/profile"),{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(e),credentials:"include"});return this.handleResponse(t)}async refreshToken(){let e=await fetch("".concat(s,"/auth/refresh"),{method:"POST",credentials:"include"}),t=await this.handleResponse(e);return t.access_token&&localStorage.setItem("access_token",t.access_token),t}async getUserPortfolios(){let e=await fetch("".concat(s,"/portfolios/user"),{headers:this.getAuthHeaders(),credentials:"include"});return this.handleResponse(e)}async getPortfolio(e){let t=await fetch("".concat(s,"/portfolios/").concat(e),{headers:this.getAuthHeaders(),credentials:"include"});return this.handleResponse(t)}async createPortfolio(e){let t=await fetch("".concat(s,"/portfolios"),{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(e),credentials:"include"});return this.handleResponse(t)}async updatePortfolio(e,t){let a=await fetch("".concat(s,"/portfolios/").concat(e),{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(t),credentials:"include"});return this.handleResponse(a)}async deletePortfolio(e){let t=await fetch("".concat(s,"/portfolios/").concat(e),{method:"DELETE",headers:this.getAuthHeaders(),credentials:"include"});await this.handleResponse(t)}async getPublicPortfolios(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=await fetch("".concat(s,"/portfolios/public?limit=").concat(e,"&offset=").concat(t));return this.handleResponse(a)}async searchPortfolios(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=await fetch("".concat(s,"/portfolios/search?q=").concat(encodeURIComponent(e),"&limit=").concat(t,"&offset=").concat(a));return this.handleResponse(r)}async enhanceWithAI(e,t,a){let r=await fetch("".concat(s,"/portfolios/enhance"),{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({portfolio_id:e,fields:t,context:a}),credentials:"include"});return this.handleResponse(r)}async healthCheck(){let e=await fetch("".concat(s.replace("/api/v1",""),"/health"));return this.handleResponse(e)}}let n=new r},1469:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{default:function(){return l},getImageProps:function(){return i}});let s=a(8229),r=a(8883),n=a(3063),o=s._(a(1193));function i(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,a]of Object.entries(t))void 0===a&&delete t[e];return{props:t}}let l=n.Image},4105:(e,t,a)=>{"use strict";a.d(t,{A:()=>i,AuthProvider:()=>l});var s=a(5155),r=a(2115),n=a(722);let o=(0,r.createContext)(void 0),i=()=>{let e=(0,r.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},l=e=>{let{children:t}=e,[a,i]=(0,r.useState)(null),[l,c]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{if(localStorage.getItem("access_token"))try{let e=await n.K.getProfile();i(e)}catch(e){try{await n.K.refreshToken();let e=await n.K.getProfile();i(e)}catch(e){localStorage.removeItem("access_token")}}c(!1)})()},[]);let d=async e=>{c(!0);try{let t=await n.K.login(e);i(t.user)}finally{c(!1)}},u=async e=>{c(!0);try{let t=await n.K.register(e);i(t.user)}finally{c(!1)}},h=async()=>{c(!0);try{await n.K.logout()}finally{i(null),c(!1)}},m=async e=>{if(a){c(!0);try{let t=await n.K.updateProfile(e);i(t)}finally{c(!1)}}};return(0,s.jsx)(o.Provider,{value:{user:a,isLoading:l,isAuthenticated:!!a,login:d,register:u,logout:h,updateProfile:m},children:t})}},4560:(e,t,a)=>{Promise.resolve().then(a.bind(a,9690))},5695:(e,t,a)=>{"use strict";var s=a(8999);a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},6766:(e,t,a)=>{"use strict";a.d(t,{default:()=>r.a});var s=a(1469),r=a.n(s)},9690:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(5155),r=a(2115),n=a(5695),o=a(6874),i=a.n(o),l=a(6766),c=a(4105);function d(){let[e,t]=(0,r.useState)(""),[a,o]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),[h,m]=(0,r.useState)(""),[g,f]=(0,r.useState)(""),[p,x]=(0,r.useState)(""),[y,b]=(0,r.useState)(!1),[v,w]=(0,r.useState)(!1),j=(0,n.useRouter)(),{login:N,register:S,isAuthenticated:P}=(0,c.A)();(0,r.useEffect)(()=>{P&&j.push("/dashboard")},[P,j]);let k=async t=>{if(t.preventDefault(),f(""),x(""),w(!0),!e||!a){f("Email and password are required."),w(!1);return}if(y&&(!d||!h)){f("First name and last name are required for registration."),w(!1);return}try{y?(await S({email:e,password:a,first_name:d,last_name:h}),x("Account created successfully! Redirecting to dashboard...")):(await N({email:e,password:a}),x("Login successful! Redirecting to dashboard...")),setTimeout(()=>{j.push("/dashboard")},1500)}catch(e){f(e instanceof Error?e.message:"Authentication failed. Please try again.")}finally{w(!1)}};return(0,s.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-md",children:[(0,s.jsx)("div",{className:"text-center mb-8",children:(0,s.jsxs)(i(),{href:"/",className:"inline-flex items-center space-x-3",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(l.default,{src:"/logo.png",alt:"DevFolio Logo",width:48,height:48,className:"rounded-xl"}),(0,s.jsx)("div",{className:"absolute -inset-1 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-xl blur opacity-25"})]}),(0,s.jsx)("span",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"DevFolio"})]})}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:y?"Create Account":"Welcome Back"}),(0,s.jsx)("p",{className:"text-gray-600",children:y?"Start building your professional resume today":"Sign in to continue building your resume"})]}),(0,s.jsxs)("form",{onSubmit:k,className:"space-y-6",children:[y&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",htmlFor:"firstName",children:"First Name"}),(0,s.jsx)("input",{id:"firstName",type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors placeholder-gray-600 text-gray-900",placeholder:"John",value:d,onChange:e=>u(e.target.value),required:y})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",htmlFor:"lastName",children:"Last Name"}),(0,s.jsx)("input",{id:"lastName",type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors placeholder-gray-600 text-gray-900",placeholder:"Doe",value:h,onChange:e=>m(e.target.value),required:y})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",htmlFor:"email",children:"Email Address"}),(0,s.jsx)("input",{id:"email",type:"email",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors placeholder-gray-600 text-gray-900",placeholder:"john@example.com",value:e,onChange:e=>t(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",htmlFor:"password",children:"Password"}),(0,s.jsx)("input",{id:"password",type:"password",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors placeholder-gray-600 text-gray-900",placeholder:"••••••••",value:a,onChange:e=>o(e.target.value),required:!0})]}),!y&&(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,s.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Remember me"})]}),(0,s.jsx)("a",{href:"#",className:"text-sm text-indigo-600 hover:text-indigo-800 font-medium",children:"Forgot password?"})]}),g&&(0,s.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,s.jsx)("p",{className:"text-red-600 text-sm",children:g})}),p&&(0,s.jsx)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,s.jsx)("p",{className:"text-green-600 text-sm",children:p})}),(0,s.jsx)("button",{type:"submit",disabled:v,className:"w-full px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:v?(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),y?"Creating Account...":"Signing In..."]}):y?"Create Account":"Sign In"})]}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,s.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Social login unavailable"})})]})}),(0,s.jsx)("div",{className:"mt-8 text-center",children:(0,s.jsxs)("p",{className:"text-gray-600",children:[y?"Already have an account?":"Don't have an account?"," ",(0,s.jsx)("button",{onClick:()=>b(!y),className:"text-indigo-600 hover:text-indigo-800 font-medium",children:y?"Sign in":"Sign up"})]})})]}),(0,s.jsx)("div",{className:"text-center mt-8",children:(0,s.jsx)(i(),{href:"/",className:"text-gray-600 hover:text-indigo-600 font-medium transition-colors",children:"← Back to Home"})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[874,63,441,684,358],()=>t(4560)),_N_E=e.O()}]);